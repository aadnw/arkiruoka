{% extends "layout.html" %}
{% block content %}

<title>Etusivu</title>
<p>
<h2>Etusivu</h2>

{% if session.user_id and session.user_role == 1 %}
Ihanaa nähdä sinua taas! Mukavia kokkaushetkiä <b>{{ session.user_name }}</b> &#129392; <br>

<nav> <a class="navbar" href="/profile/{{ session.user_id }}"><h3>Oma profiili</h3></a>
    <a href="/favorites/{{ session.user_id }}">Suosikit</a>
    <a href="/remove">Poista resepti</a>
</nav>

{% elif session.user_id and session.user_role == 2 %}
Tervetuloa ylläpitäjä, <b>{{ session.user_name }}.</b>
{% else %}
Et ole kirjautunut sisään. <a href="/login">Kirjaudu sisään</a> tai <a href="/register">luo uusi profiili</a>.
{% endif %}

<hr>

<h3>Kategoriat:</h3>

<ul>
{% for category in categories %}
<li><a href="/category/{{ category.id }}">{{ category.name }}</a>
{% endfor %}
</ul>

<p>

{% if tops %}
<h3>Top 3 reseptit:</h3>

<ol>
{% for top in tops %}
<li><a href="/recipe/{{ top.recipe_id }}">{{ top.name }}</a>
{% endfor %}
</ol>
{% endif %}

<form action="/result" method="GET">
<h3>Hae reseptiä:</h3> <input type="text" name="query">
<br>
<input type="submit" value="Hae">
<input type="hidden" name="csrf_token" value="{{ session.csrf_token}}">
</form>

{% if session.user_role == 2 %}
<h3>Ylläpitäjän toiminnot</h3>
<ul>
<li> <a href="/remove_cat">Poista kategoria</a>
<li> <a href="/new_cat">Lisää uusi kategoria</a>
<li> <a href="/admin_remove">Hallinnoi reseptejä</a>
</ul>
{% endif %}

<hr>

{% if session.user_id %}
<a href="/logout">Kirjaudu ulos</a>
{% endif %}

{% endblock %}